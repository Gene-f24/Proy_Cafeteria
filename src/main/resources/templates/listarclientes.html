<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Clientes</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a class="navbar-brand" href="#">Cafetería</a>
		<div class="collapse navbar-collapse">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item"><a class="nav-link"
						th:href="${session.usuarioLogueado.idtipousua == 1} ? @{/admin/home} : @{/vend/home}">Inicio</a>
				</li>
				<li class="nav-item"><a class="nav-link" th:href="@{/clientes/cargarclientes}">Clientes</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/productos/cargarproductos}">Productos</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/ventas/cargarventas}">Ventas</a></li>
				<li class="nav-item"
					th:if="${session.usuarioLogueado != null and session.usuarioLogueado.idtipousua == 1}">
					<a class="nav-link" th:href="@{/usuarios/cargarusuarios}">Usuarios</a>
				</li>
			</ul>
			<ul class="navbar-nav ml-auto">
				<li class="nav-item">
					<a th:href="@{/logout}" class="btn btn-danger btn-sm">Cerrar sesión</a>
				</li>
			</ul>
		</div>
	</nav>

	<div class="container mt-2"> <br>
		<h4>Lista de Clientes Registrados</h4><br>
		<div class="mb-3">
			<a th:href="@{/clientes/nuevo}" class="btn btn-primary me-2">Agregar nuevo cliente</a>
			<a th:href="${session.usuarioLogueado.idtipousua == 1} ? @{/admin/home} : @{/vend/home}"
				class="btn btn-secondary">Volver</a>
		</div>

		<form th:action="@{/clientes/buscar}" method="get" class="form-inline mb-4">
			<div class="d-flex flex-wrap gap-2">
				<input type="text" name="txtNroDocCli" class="form-control" placeholder="Buscar por DNI" required>
				<button type="submit" class="btn btn-success">Buscar</button>
				<a th:href="@{/clientes/cargarclientes}" class="btn btn-secondary ml-2">Mostrar todos</a>
			</div>
		</form>
		<div class="row">
			<div class="col-6 col-sm-7">
				<h3></h3>
				<table class="table">
					<thead>
						<tr>
							<th>ID</th>
							<th>Nombre</th>
							<th>Documento</th>
							<th>Tipo documento</th>
							<th>Opcion</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="c : ${lstClientes}">
							<!-- <th scope="row" th:text="${c.idCli}">1</th> -->
							<th scope="row">
								<img th:src="@{/img/clientes/} +${c.idCli} + @{.jpg}" width="80px" height="80px"
									class="rounded-circle" alt="imagen del cliente">
							</th>
							<td th:text="${c.nom_cli}">xx</td>
							<td th:text="${c.nroDocCli}">xx</td>
							<td th:text="${c.objTipoDoc.nom_tipodoc}">xx</td>
							<td class="d-flex justify-content-center">
								<a th:href="@{/clientes/editar/}+${c.idCli}"
									class="btn btn-warning btn-sm mr-1">Editar</a>
								<a th:href="@{/clientes/eliminar/}+${c.idCli}" class="btn btn-danger btn-sm"
									onclick="return confirm('¿Seguro que deseas eliminar este cliente?');">
									Eliminar</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<p th:text="${mensaje}" class="text-danger"></p>
	</div>
	</div>
	</div>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>